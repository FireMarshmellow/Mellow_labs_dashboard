{% extends "base.html" %}
{% block content %}
<h1 class="text-xl font-semibold mb-4">Payroll / Owner Draws</h1>
<div class="space-y-6">
  <form method="post" action="/payroll" class="p-4 rounded-2xl bg-slate-800 max-w-2xl">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label class="text-xs text-slate-300">Date</label>
        <input type="date" name="date" required class="w-full bg-slate-900 rounded px-2.5 py-1.5 text-sm"/>
      </div>
      <div>
        <label class="text-xs text-slate-300">Person</label>
        <input name="person" value="Owner" class="w-full bg-slate-900 rounded px-2.5 py-1.5 text-sm"/>
      </div>
      <div>
        <label class="text-xs text-slate-300">Amount (£)</label>
        <input type="number" step="0.01" min="0" name="amount_gbp" required class="w-full bg-slate-900 rounded px-2.5 py-1.5 text-sm"/>
      </div>
      <div class="col-span-full">
        <label class="text-xs text-slate-300">Notes</label>
        <textarea name="notes" class="w-full bg-slate-900 rounded px-2.5 py-1.5 text-sm" rows="2"></textarea>
      </div>
      <div class="col-span-full sm:col-span-1">
        <button class="w-full py-1.5 rounded bg-blue-600 hover:bg-blue-500 text-sm">Add Transfer</button>
      </div>
    </div>
  </form>

  <div class="p-4 rounded-2xl bg-slate-800">
    <div class="flex justify-end mb-2">
      <a href="/payroll/export" class="text-xs px-3 py-1 rounded bg-slate-700 hover:bg-slate-600">Export CSV</a>
    </div>
    <table class="w-full text-sm">
      <thead>
        <tr class="text-left text-slate-400">
          <th class="py-2">Date</th>
          <th>Person</th>
          <th class="text-right">Amount</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        {% for t in transfers %}
        <tr class="border-t border-slate-700">
          <td class="py-2">{{ t.date }}</td>
          <td>{{ t.person }}</td>
          <td class="text-right">£{{ '%.2f'|format(t.amount_gbp) }}</td>
          <td class="truncate max-w-[26ch]">{{ t.notes or '' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
