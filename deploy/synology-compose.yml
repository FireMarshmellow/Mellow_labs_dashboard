version: "3.9"

services:
  mellow-biz:
    image: ${IMAGE}
    container_name: mellow-biz
    ports:
      - "3000:3000"
    environment:
      - PORT=3000
      - DATABASE_PATH=/data/finance.db
      - UPLOADS_DIR=/data/uploads
      - APP_VERSION=${APP_VERSION:-latest}
    volumes:
      - ${HOST_DATA_PATH:-./data}:/data
    labels:
      - "com.centurylinklabs.watchtower.enable=true"
    restart: unless-stopped

  watchtower:
    image: containrrr/watchtower:latest
    container_name: watchtower
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command: --label-enable --cleanup --interval 900 --registry-auth
    restart: unless-stopped
